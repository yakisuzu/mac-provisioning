---
# tasks
# http://docs.ansible.com/ansible/list_of_all_modules.html

# brew tap
# http://docs.ansible.com/ansible/homebrew_tap_module.html
- name: append homebrew repositories
  homebrew_tap: tap={{ item }} state=present
  with_items: homebrew_taps
  when: homebrew_taps

# brew
# http://docs.ansible.com/ansible/homebrew_module.html
- name: update homebrew
  homebrew: update_homebrew=yes

- name: install package for brew
  homebrew: >
    name={{ item.name }}
    state={{ item.state | default('latest') }}
    install_options={{
      item.install_options | default() | join(',')
      if item.install_options is not string
      else item.install_options
    }}
  with_items: homebrew_packages
  when: homebrew_packages

# brew cask
# http://docs.ansible.com/ansible/homebrew_cask_module.html
- name: install homebrew cask
  homebrew: name=brew-cask state=latest
- name: install package for homebrew-cask
  homebrew_cask: name={{ item.name }} state={{ item.state|default('installed') }}
  with_items: homebrew_cask_packages
  when: homebrew_cask_packages

# Ricty
- name: install xquartz (for Ricty)
  homebrew_cask: name=xquartz
- name: install fontforge (for Ricty)
  homebrew: name=fontforge
- name: install Ricty
  homebrew: name=ricty
- name: move font directory
  shell: cp -f $(brew --cellar ricty)/*/share/fonts/Ricty*.ttf ~/Library/Fonts/
  args:
    creates: ~/Library/Fonts/Ricty-Bold.ttf
  notify: run fc-cache

# vim
- name: init neobundle
  git: repo=git@github.com:Shougo/neobundle.vim dest=~/.vim/bundle/neobundle.vim
- name: init vimrc
  git: repo=git@github.com:yakisuzu/dotfiles.git dest=~/dotfiles
  notify: mklink vimrc

